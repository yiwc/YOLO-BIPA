FROM nvidia/cuda:11.2.0-base-ubuntu18.04

MAINTAINER GuoSheng<Gs1997XX@163.com>

RUN apt -y update 

RUN apt install -y software-properties-common

RUN add-apt-repository ppa:deadsnakes/ppa

RUN apt install -y python3.8

RUN apt install -y python3-pip

RUN apt install -y python-pip

RUN pip3 install fastapi && pip3 install uvicorn[standard]

RUN pip install scikit-build
  
RUN pip install opencv-contrib-python==4.2.0.32 && pip3 install pydantic && pip3 install torch==1.9.0+cu111 torchvision==0.10.0+cu111 torchaudio==0.9.0 -f https://download.pytorch.org/whl/torch_stable.html

RUN echo 'export PYTHONPATH="/usr/local/lib/python3.6/dist-packages:$PYTHONPATH"' >> ~/.bashrc && . ~/.bashrc

RUN apt install -y git && pip install gdown

WORKDIR /root/Downloads

RUN cd /root/Downloads && git clone https://github.com/yiwc/YOLO-BIPA.git 

WORKDIR /root/Downloads/YOLO-BIPA/Fastapi/yolov4/darknet/backup

RUN cd /root/Downloads/YOLO-BIPA/Fastapi/yolov4/darknet/backup && gdown https://drive.google.com/uc?id=1MfC8k49viHghsfqM3jxqcgAMlTKlliGe



EXPOSE 8081

ENTRYPOINT ["python3","/root/Downloads/YOLO-BIPA/Fastapi/BS3_yolo_server.py"]









































































































































































































































































































































































































































































































































































